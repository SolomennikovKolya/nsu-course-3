
### Полезности
- [go с примерами](https://gobyexample.com)
- [Go cheatsheet](https://devhints.io/go)
- [Go dev tour](https://go.dev/tour/welcome/1)

**Go** (или Golang) — это компилируемый язык программирования, разработанный в Google в 2007 году и выпущенный в 2009 году. Основные аспекты языка:

### Основные характеристики Go:

- **Статическая типизация**: Типы данных в Go указываются явно, что позволяет избегать ошибок во время исполнения программы и делает код более предсказуемым.

- **Параллелизм**: Go поддерживает многозадачность с помощью лёгковесных потоков (goroutines), что делает его особенно подходящим для написания многопоточных приложений, таких как серверы и сетевые программы. Используются примитивы параллелизма Go, горутины и каналы. В основе модели параллелизма Go лежит планировщик, часть системы среды выполнения, которая управляет работой горутин. Планировщик Go является планировщиком M:N, потому что он распределяет M горутин на N потоков ОС, где M может быть намного больше N. 
	- **Горутины** - основная единицей процесса планирования в Go. Горутины дёшевы в создании и уничтожении, поскольку им требуется лишь небольшой объём памяти для их стека (по умолчанию стек горутины начинается всего с 2 КБ).
	- **Work stealing**: чтобы равномерно распределить рабочую нагрузку между несколькими потоками, Go использует жадную стратегию Work stealing. Каждый поток ОС поддерживает локальную очередь выполняемых горутин. Когда поток завершает выполнение своих локальных горутин, он пытается забрать простаивающие горутины других потоков. Это помогает держать все потоки занятыми и использовать все доступные ядра процессора.

- **Сборка мусора**: В Go встроен механизм автоматической сборки мусора (Garbage Collection), который работает конкурентно с выполнением программы на Go, что позволяет не останавливать выполнение программы для отчистки  мусора.

- **Встроенная поддержка работы с сетью**: Go изначально разрабатывался для высоконагруженных серверных приложений, поэтому в языке есть мощные средства для работы с сетевыми протоколами и сетевыми программами.

- **Быстрая компиляция**: Компилятор Go отличается высокой скоростью, что позволяет разработчикам быстро получать результаты своих изменений в коде. Проект можно статически скомпилировать в один исполняемый файл вместе со всеми используемыми библиотеками, что позволяет решить проблему с зависимостями.

- **Стандартная библиотека**: Go имеет большую стандартную библиотеку, включающую пакеты для работы с файлами, сетями, криптографией, HTTP, JSON и многим другим.

- **Кросс-компиляция** — процесс компиляции кода на одном типе машины или операционной системы («хост») для запуска на другом типе машины или операционной системы («цель»). Она возможна потому, что Go имеет автономную, платформонезависимую стандартную библиотеку и среду выполнения, а значит, ему не нужно связываться с системными библиотеками, как это делают некоторые другие языки. Примеры компиляции на Linux, Windows и macOS с архитектурой amd64:
	- `GOOS=linux GOARCH=amd64 go build -o myprogram_linux myprogram.go`
	- `GOOS=windows GOARCH=amd64 go build -o myprogram_windows.exe myprogram.go`
	- `GOOS=darwin GOARCH=amd64 go build -o myprogram_mac myprogram.go`

- **Escape Analysis** — это техника оптимизации компилятора, которая определяет, можно ли безопасно выделить переменную в стеке, а не в куче, что может значительно повысить производительность.

- **Каналы** используются для безопасного обмена данными между горутинами. Это позволяет легко синхронизировать задачи и обмениваться данными без риска возникновения условий гонки. Вместо того, чтобы потоки обменивались данными через общую память, Go предлагает горутинам обмениваться данными через явные примитивы синхронизации — каналы.

- **Встроенные интсрументы**:
	- `go run` - компиляция + запуск (например `go run main.go`)
	- `go test` - запуск тестов
	- `go build` - компилирует код в .exe файл

- **Встроенный профилировщик** - для теста скорости

- **Система модулей Go** - модульность

### Запуск первой программы
1. `go mod init myproject` - создаёт go модуть в текущей директории (создаёт файл go.mod). Нужно для управления зависимостями.
2. Создаём файл `main.go`
3. `go run main.go` - запуск

### Типы данных
1. Целочисленные - int int8, int16, int32, int64, uint uint8, uint16, uint32, uint64
2. Дробные - float32, float64
3. bool (true or false) 
4. Строка - string
5. Символ - byte (uint8)
6. Комплексные числа - complex64, complex128
7. Массив - array (размер - константа)
8. Срез - slice (похоже на vector)
9. Словарь - map
10. Unicode символ - rune

### Факты
1. Программа начинает выполняться с пакета `main` (package main).
2. Магическая функция init() выполняется до main.
3. Управляющие структуры: if, for, switch, select, labels, range (slice, array, map)
4. Поддержка функций как объектов первого класса, то есть функции могут передаваться как аргументы, возвращаться из других функций и сохраняться в переменные. 
5. Анонимные функции и замыкания. Можно объявить функцию без имени и использовать переменные из внешнего контекста.
6. Операторы присвоения
	- "=" - присвоение значения уже объявленной переменной (например var x int = 10)
	- ":=" - объявление + присвоение (например x := 10)
7. `make` - команда для создания и инициализации срезов (slices), карт (maps) и каналов (channels). Это встроенная функция языка Go, и она отличается от команды `new`, которая просто выделяет память, но не инициализирует структуру данных.
8. `defer` откладывает выполнение функции до тех пор, пока текущая функция не завершится.

### Как работают модули:
- Система модулей автоматически управляет зависимостями проекта, благодаря файлам `go.mod` и `go.sum`.
- Go-модули хранятся в локальном кэше в директории, которая по умолчанию находится в GOPATH, но проект может располагаться где угодно на вашем компьютере.
- GOPATH — это путь, в котором раньше хранился исходный код Go-проектов, пакеты и собранные бинарные файлы.
- GOROOT — это путь к месту установки Go, где находятся стандартные библиотеки и сам компилятор.

### Пакеты
- Если имя переменной, функции или типа начинается с заглавной буквы, оно экспортируется и доступно для использования в других пакетах.
- Если имя начинается со строчной буквы, оно не экспортируется и доступно только в пределах текущего пакета.
- Имя пакета обычно соответствует имени папки, в которой он находится
- Все файлы одного пакета компилируются как единая сущность, поэтому переменные и функции в разных файлах одного пакета автоматически доступны без импорта.
- Один пакет — одна папка

### Параллелизм
1. **Каналы** -  позволяют горутинам общаться между собой. Это механизм синхронизации и обмена данными между горутинами. 
	- Буферизованный канал - имеет фиксированный размер и блокируется, когда он полон или пуст.
	- Небуферизованный канал - блокируется, пока одна горутина не отправит данные, а другая не получит их.
2. **select** — для работы с множественными каналами. Позволяет ждать событий на разных каналах (например, когда канал готов принять или вернуть данные) и обрабатывать их по мере поступления. Это похоже на оператор `switch`, но вместо условий проверяются каналы. Основные правила работы `select`:
	- `select` блокируется и ждет, пока одно из каналов станет доступным для операции (чтения или записи).
	- Если готовы несколько каналов одновременно, выбирается один случайным образом.
	- Если ни один из каналов не готов, `select` блокируется, пока не появится готовый канал.
	- Если в `select` есть случай с блоком `default`, он выполняется, если ни один канал не готов (что делает `select` неблокирующим).
3. **Mutex** - обычный мьютекс
4. **WaitGroup** - 

