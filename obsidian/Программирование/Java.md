
### Полезности
- [Maven](https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core/2.17.1)
- [Oracle Docs](https://docs.oracle.com/en/java/javase/22/docs/api/index.html)
- [Intellij IDEA shortcuts](https://resources.jetbrains.com/storage/products/intellij-idea/docs/IntelliJIDEA_ReferenceCard.pdf)

### Почему объекты на куче в Java работают быстро?

1. **Аллокаторы памяти**: В Java для аллокации объектов используются оптимизированные аллокаторы, которые работают быстрее, чем простая работа с кучей. Например, когда создаются объекты, они вначале помещаются в младшее поколение, где аллокация памяти может быть выполнена за один шаг (bump-the-pointer allocation), так как память выделяется в компактном непрерывном блоке.

2. **Escape Analysis**: Этот механизм позволяет Java оптимизировать использование памяти, выполняя stack allocation вместо heap allocation в тех случаях, когда анализ показывает, что объект не "уходит" за пределы метода или потока. Например, если объект не передается за пределы метода, компилятор может разместить его в стеке, а не в куче.

3. **Представление объектов в памяти**: JVM использует компактные и оптимизированные структуры данных для управления объектами. Например, полные метаданные объекта (например, информация о классе и монитор для синхронизации) хранятся в компактной форме, а поля объектов могут быть выровнены и оптимизированы для эффективного доступа.

### Аллокация

**Аллокация** (выделение) памяти в Java происходит только под контролем JVM (Java Virtual Machine). 

Модель памяти в куче: разделение на поколения:

1. **Young Generation (Молодое поколение)**:
    - Это область памяти, где создаются новые объекты. Она состоит из трёх частей: одного **Eden Space** и двух **Survivor Spaces**.
    - Когда объект создаётся, он попадает в Eden Space. Когда происходит сбор мусора (Minor GC), живые объекты перемещаются в один из Survivor Space.
    - Для ускорения работы JVM использует простую технику аллокации памяти в молодом поколении — **bump-the-pointer allocation**. Вся память в Eden Space является сплошным блоком, и для выделения нового объекта достаточно сдвинуть указатель на новое свободное место в памяти (аналогично тому, как происходит аллокация на стеке)

2. **Old Generation (Старшее поколение)**:
    - Когда объекты становятся "старше" (например, после нескольких циклов сборки мусора в Young Generation), они перемещаются в старшее поколение.
    - Это область, где хранятся объекты с долгим временем жизни. Сбор мусора в старшем поколении происходит реже, и он может быть более дорогим по времени выполнения, чем в молодом поколении (Major GC).

Другие регионы памяти:

1. **Metaspace**:
	- На куче хранятся только данные объекта (поля), а метаданные (имя, супер-класс, реализуемые интерфейсы, описание полей и методов класса, виртуальные таблицы (vtable), ссылки на байт-код методов (Bytecode references), символьные пулы (String Pool)) 

